Resources:
  rContactFlow:
    Type: "AWS::Connect::ContactFlow"
    Properties:
      InstanceArn: !Sub "arn:aws:connect:${AWS::Region}:${AWS::AccountId}:instance/${file(config/resources/references.yml):pConnectInstanceID}"
      Name: "${file(config/resources/references.yml):pCompany_profix}_${file(config/resources/references.yml):pContactFlowName}"
      Description: "Simple flow using Serverless"
      Type: "CONTACT_FLOW"
      Content: !Sub |
        {"Version":"2019-10-30","StartAction":"16e37570-90a3-4ec5-8bd7-d0a0fba54105","Metadata":{"entryPointPosition":{"x":40,"y":40},"ActionMetadata":{"b3ccf3de-a129-4662-b0a1-d6c25e9ed85d":{"position":{"x":2532,"y":-571.2},"children":["d7051c05-dd79-4d8b-8ad2-be4f9397cb95"],"dynamicParams":[],"isSplitModule":true},"d7051c05-dd79-4d8b-8ad2-be4f9397cb95":{"position":{"x":2532,"y":-571.2},"parameters":{"CustomerId":{"useDynamic":true}},"dynamicParams":["customerId"],"isSplitModule":true},"7218dcc7-63d8-4088-b659-910a8860d9bb":{"position":{"x":2628,"y":203.2},"children":["4fb6adce-b3f8-4083-8572-a08aa49e05ab"],"dynamicParams":[],"isSplitModule":true},"4fb6adce-b3f8-4083-8572-a08aa49e05ab":{"position":{"x":2628,"y":203.2},"parameters":{"CustomerId":{"useDynamic":true}},"dynamicParams":["customerId"],"isSplitModule":true},"16e37570-90a3-4ec5-8bd7-d0a0fba54105":{"position":{"x":117.6,"y":-228.8}},"81bcba32-66fd-483e-bcf4-9ab026ef9f39":{"position":{"x":381.6,"y":-245.6},"conditions":[],"conditionMetadata":[{"id":"6df14d2a-0463-41bd-9d3c-6d280f572d92","operator":{"name":"Contains","value":"Contains","shortDisplay":"contains"},"value":"BelPromo"}]},"632f28e3-03fd-424d-a1c7-95968b3ddaea":{"position":{"x":900.8,"y":-303.2}},"c302166a-f765-46a1-b299-2e4fad6ce26b":{"position":{"x":661.6,"y":-157.6},"conditions":[],"conditionMetadata":[{"id":"ecf07a9c-dfc0-468b-b5ce-c09264ed747d","operator":{"name":"Contains","value":"Contains","shortDisplay":"contains"},"value":"SALES"}]},"8abd6162-24f8-4fb7-a092-069802654a9c":{"position":{"x":1904,"y":-520.8},"parameters":{"Attributes":{"CUSTOM_CUSTOMER_EMAIL":{"useDynamic":true}}},"dynamicParams":["CUSTOM_CUSTOMER_EMAIL"]},"d703ed41-dc20-42f5-82d5-c323a51248f4":{"position":{"x":2210.4,"y":-528},"parameters":{"ProfileRequestData":{"IdentifierName":{"displayName":"Email"},"IdentifierValue":{"useDynamic":true}}},"useDynamic":{"IdentifierName":true,"IdentifierValue":true},"customerProfilesAction":"GetCustomerProfile"},"1cf80242-5d6b-4f31-9464-ee39f60943ce":{"position":{"x":2547.2,"y":-335.2},"parameters":{"Attributes":{"profileSearchValue":{"useDynamic":true}}},"dynamicParams":["profileSearchValue"]},"83620ad8-ccf6-4180-8670-096a195a9531":{"position":{"x":2962.4,"y":-544.8}},"6ffb73ca-3773-48d2-b6d3-75dc026fc837":{"position":{"x":1976,"y":251.2},"parameters":{"Attributes":{"CUSTOM_CUSTOMER_EMAIL":{"useDynamic":true}}},"dynamicParams":["CUSTOM_CUSTOMER_EMAIL"]},"d823653e-3014-442a-a769-1128a23b51bd":{"position":{"x":2278.4,"y":230.4},"parameters":{"ProfileRequestData":{"IdentifierName":{"displayName":"Email"},"IdentifierValue":{"useDynamic":true}}},"useDynamic":{"IdentifierName":true,"IdentifierValue":true},"customerProfilesAction":"GetCustomerProfile"},"2155e568-201f-411e-9cfe-3ac9c8c7846f":{"position":{"x":2642.4,"y":411.2},"parameters":{"Attributes":{"profileSearchValue":{"useDynamic":true}}},"dynamicParams":["profileSearchValue"]},"e689eb14-57c4-4bef-9e33-946a01531ddf":{"position":{"x":3019.2,"y":299.2}},"7e32d332-1644-45e7-8823-bc7517e7754c":{"position":{"x":538.4,"y":-717.6}},"8b16e780-f1fa-4f98-968c-1f691add5695":{"position":{"x":1172,"y":-173.6}},"4d0c7b2c-a4d4-4f33-926e-dea54227a942":{"position":{"x":945.6,"y":504.8}},"10608ddc-049d-49d2-b21a-92ba2275c948":{"position":{"x":4512,"y":-256}},"af9bf216-081c-4129-a057-ec0f0ad3b2d6":{"position":{"x":1131.2,"y":-474.4},"parameters":{"HoursOfOperationId":{"displayName":"${file(config/resources/references.yml):pHoursOfOprationName}"}},"Hours":{"id":"${rHoursOfOperation}","text":"${file(config/resources/references.yml):pHoursOfOprationName}"}},"a83fded9-68f3-473c-9445-b05282ccbaae":{"position":{"x":896.8,"y":153.6},"parameters":{"HoursOfOperationId":{"displayName":"${file(config/resources/references.yml):pHoursOfOprationName}"}},"Hours":{"id":"${rHoursOfOperation}","text":"${file(config/resources/references.yml):pHoursOfOprationName}"}},"13f4d9a9-1b5e-4749-8853-1dbb26309d10":{"position":{"x":1661.6,"y":-496.8},"conditions":[],"conditionMetadata":[{"id":"1d8734f1-64d4-4148-9ad6-e871a7d30802","operator":{"name":"Contains","value":"Contains","shortDisplay":"contains"},"value":"@"}]},"345f5eec-3d63-4309-af21-31e99e875621":{"position":{"x":1698.4,"y":265.6},"conditions":[],"conditionMetadata":[{"id":"bb5c0b98-5c8a-49b0-8a0b-420bc22aefe0","operator":{"name":"Contains","value":"Contains","shortDisplay":"contains"},"value":"@"}]},"75ec1a9d-4c97-4891-99d1-b95d7c2dbe0b":{"position":{"x":5160.8,"y":-262.4}},"1f1d9fc3-5755-4092-94da-0df13149d03d":{"position":{"x":1463.2,"y":-20.8},"parameters":{"LexV2Bot":{"AliasArn":{"displayName":"${file(config/resources/references.yml):pLexBotAliasName}","useLexBotDropdown":true,"lexV2BotName":"${file(config/resources/references.yml):pLexBotName}"}},"LexSessionAttributes":{"session_customer_email":{"useDynamic":true}}},"dynamicMetadata":{"session_customer_email":true},"useLexBotDropdown":true,"lexV2BotName":"${file(config/resources/references.yml):pLexBotName}","lexV2BotAliasName":"${file(config/resources/references.yml):pLexBotAliasName}","conditionMetadata":[{"id":"eaaa1fc4-7b04-4c4d-83ac-bb5e9978eaee","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"CustomerServiceIntent"},{"id":"60d68b0d-2b61-47b8-abcf-8891b47ca20a","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"SalesIntent"}]},"31b81fa0-1cfb-4968-af29-c5d41e37274e":{"position":{"x":3399.2,"y":-512},"parameters":{"QueueId":{"displayName":"${file(config/resources/references.yml):pQueueName}"}},"queue":{"text":"${file(config/resources/references.yml):pQueueName}"}},"3e4a3ffd-9da0-4cf7-9aff-68d5dfc38fdb":{"position":{"x":3380.8,"y":286.4},"parameters":{"QueueId":{"displayName":"${file(config/resources/references.yml):pQueueName}"}},"queue":{"text":"${file(config/resources/references.yml):pQueueName}"}},"148c95d7-c4f5-4a36-85f0-d279bc75320d":{"position":{"x":4129.6,"y":-228.8}},"ceb3795c-9be8-4212-bf32-c80117479b68":{"position":{"x":3867.2,"y":-216.8},"parameters":{"LambdaFunctionARN":{"displayName":"${file(config/resources/references.yml):pLambdaFunction}"},"LambdaInvocationAttributes":{"contactId":{"useDynamic":true}}},"dynamicMetadata":{"contactId":true}}},"Annotations":[],"name":"${file(config/resources/references.yml):pContactFlowName}","description":"Simple flow using Serverless","type":"contactFlow","status":"PUBLISHED","hash":{}},"Actions":[{"Parameters":{"Attributes":{"profileSearchValue":"$.Customer.EmailAddress","profileSearchKey":"EmailAddress"},"TargetContact":"Current"},"Identifier":"b3ccf3de-a129-4662-b0a1-d6c25e9ed85d","Type":"UpdateContactAttributes","Transitions":{"NextAction":"d7051c05-dd79-4d8b-8ad2-be4f9397cb95","Errors":[{"NextAction":"83620ad8-ccf6-4180-8670-096a195a9531","ErrorType":"NoMatchingError"}]}},{"Parameters":{"TargetContact":"Current","CustomerId":"$.Customer.ProfileARN"},"Identifier":"d7051c05-dd79-4d8b-8ad2-be4f9397cb95","Type":"UpdateContactData","Transitions":{"NextAction":"83620ad8-ccf6-4180-8670-096a195a9531","Errors":[{"NextAction":"83620ad8-ccf6-4180-8670-096a195a9531","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"profileSearchValue":"$.Customer.EmailAddress","profileSearchKey":"EmailAddress"},"TargetContact":"Current"},"Identifier":"7218dcc7-63d8-4088-b659-910a8860d9bb","Type":"UpdateContactAttributes","Transitions":{"NextAction":"4fb6adce-b3f8-4083-8572-a08aa49e05ab","Errors":[{"NextAction":"e689eb14-57c4-4bef-9e33-946a01531ddf","ErrorType":"NoMatchingError"}]}},{"Parameters":{"TargetContact":"Current","CustomerId":"$.Customer.ProfileARN"},"Identifier":"4fb6adce-b3f8-4083-8572-a08aa49e05ab","Type":"UpdateContactData","Transitions":{"NextAction":"e689eb14-57c4-4bef-9e33-946a01531ddf","Errors":[{"NextAction":"e689eb14-57c4-4bef-9e33-946a01531ddf","ErrorType":"NoMatchingError"}]}},{"Parameters":{"RecordingBehavior":{"RecordedParticipants":["Agent","Customer"],"ScreenRecordedParticipants":["Agent"]},"AnalyticsBehavior":{"Enabled":"True","AnalyticsLanguage":"en-US","AnalyticsRedactionBehavior":"Disabled","AnalyticsRedactionResults":"RedactedAndOriginal","ChannelConfiguration":{"Chat":{"AnalyticsModes":["ContactLens"]},"Voice":{"AnalyticsModes":[]}}}},"Identifier":"16e37570-90a3-4ec5-8bd7-d0a0fba54105","Type":"UpdateContactRecordingBehavior","Transitions":{"NextAction":"81bcba32-66fd-483e-bcf4-9ab026ef9f39"}},{"Parameters":{"ComparisonValue":"$.Attributes.INSTANCE_NAME"},"Identifier":"81bcba32-66fd-483e-bcf4-9ab026ef9f39","Type":"Compare","Transitions":{"NextAction":"c302166a-f765-46a1-b299-2e4fad6ce26b","Conditions":[{"NextAction":"7e32d332-1644-45e7-8823-bc7517e7754c","Condition":{"Operator":"TextContains","Operands":["BelPromo"]}}],"Errors":[{"NextAction":"c302166a-f765-46a1-b299-2e4fad6ce26b","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"Text":"sales"},"Identifier":"632f28e3-03fd-424d-a1c7-95968b3ddaea","Type":"MessageParticipant","Transitions":{"NextAction":"af9bf216-081c-4129-a057-ec0f0ad3b2d6","Errors":[{"NextAction":"af9bf216-081c-4129-a057-ec0f0ad3b2d6","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.Attributes.SERVICE_NAME"},"Identifier":"c302166a-f765-46a1-b299-2e4fad6ce26b","Type":"Compare","Transitions":{"NextAction":"a83fded9-68f3-473c-9445-b05282ccbaae","Conditions":[{"NextAction":"632f28e3-03fd-424d-a1c7-95968b3ddaea","Condition":{"Operator":"TextContains","Operands":["SALES"]}}],"Errors":[{"NextAction":"a83fded9-68f3-473c-9445-b05282ccbaae","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"Attributes":{"CUSTOM_CUSTOMER_EMAIL":"$.Lex.Slots.CustomerEmail"},"TargetContact":"Current"},"Identifier":"8abd6162-24f8-4fb7-a092-069802654a9c","Type":"UpdateContactAttributes","Transitions":{"NextAction":"d703ed41-dc20-42f5-82d5-c323a51248f4","Errors":[{"NextAction":"d703ed41-dc20-42f5-82d5-c323a51248f4","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ProfileRequestData":{"IdentifierName":"_email","IdentifierValue":"$.Attributes.CUSTOM_CUSTOMER_EMAIL"},"ProfileResponseData":["AccountNumber","AdditionalInformation","Address1","Address2","Address3","Address4","BillingAddress1","BillingAddress2","BillingAddress3","BillingAddress4","BillingCity","BillingCountry","BillingCounty","BillingPostalCode","BillingProvince","BillingState","BirthDate","BusinessName","BusinessPhoneNumber","BusinessEmailAddress","City","Country","County","EmailAddress","FirstName","Gender","HomePhoneNumber","LastName","MailingAddress1","MailingAddress2","MailingAddress3","MailingAddress4","MailingCity","MailingCountry","MailingCounty","MailingPostalCode","MailingProvince","MailingState","MiddleName","MobilePhoneNumber","PartyType","PhoneNumber","PostalCode","Province","ShippingAddress1","ShippingAddress2","ShippingAddress3","ShippingAddress4","ShippingCity","ShippingCountry","ShippingCounty","ShippingPostalCode","ShippingProvince","ShippingState","State"]},"Identifier":"d703ed41-dc20-42f5-82d5-c323a51248f4","Type":"GetCustomerProfile","Transitions":{"NextAction":"b3ccf3de-a129-4662-b0a1-d6c25e9ed85d","Errors":[{"NextAction":"83620ad8-ccf6-4180-8670-096a195a9531","ErrorType":"NoMatchingError"},{"NextAction":"83620ad8-ccf6-4180-8670-096a195a9531","ErrorType":"MultipleFoundError"},{"NextAction":"1cf80242-5d6b-4f31-9464-ee39f60943ce","ErrorType":"NoneFoundError"}]}},{"Parameters":{"Attributes":{"profileSearchValue":"$.Attributes.CUSTOM_CUSTOMER_EMAIL","profileSearchKey":"EmailAddress"},"TargetContact":"Current"},"Identifier":"1cf80242-5d6b-4f31-9464-ee39f60943ce","Type":"UpdateContactAttributes","Transitions":{"NextAction":"83620ad8-ccf6-4180-8670-096a195a9531","Errors":[{"NextAction":"83620ad8-ccf6-4180-8670-096a195a9531","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Thank you for your patience. A sales team member will join you shortly."},"Identifier":"83620ad8-ccf6-4180-8670-096a195a9531","Type":"MessageParticipant","Transitions":{"NextAction":"31b81fa0-1cfb-4968-af29-c5d41e37274e","Errors":[{"NextAction":"31b81fa0-1cfb-4968-af29-c5d41e37274e","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"CUSTOM_CUSTOMER_EMAIL":"$.Lex.Slots.CustomerEmail"},"TargetContact":"Current"},"Identifier":"6ffb73ca-3773-48d2-b6d3-75dc026fc837","Type":"UpdateContactAttributes","Transitions":{"NextAction":"d823653e-3014-442a-a769-1128a23b51bd","Errors":[{"NextAction":"d823653e-3014-442a-a769-1128a23b51bd","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ProfileRequestData":{"IdentifierName":"_email","IdentifierValue":"$.Attributes.CUSTOM_CUSTOMER_EMAIL"},"ProfileResponseData":["AccountNumber","AdditionalInformation","Address1","Address2","Address3","Address4","BillingAddress1","BillingAddress2","BillingAddress3","BillingAddress4","BillingCity","BillingCountry","BillingCounty","BillingPostalCode","BillingProvince","BillingState","BirthDate","BusinessName","BusinessPhoneNumber","BusinessEmailAddress","City","Country","County","EmailAddress","FirstName","Gender","HomePhoneNumber","LastName","MailingAddress1","MailingAddress2","MailingAddress3","MailingAddress4","MailingCity","MailingCountry","MailingCounty","MailingPostalCode","MailingProvince","MailingState","MiddleName","MobilePhoneNumber","PartyType","PhoneNumber","PostalCode","Province","ShippingAddress1","ShippingAddress2","ShippingAddress3","ShippingAddress4","ShippingCity","ShippingCountry","ShippingCounty","ShippingPostalCode","ShippingProvince","ShippingState","State"]},"Identifier":"d823653e-3014-442a-a769-1128a23b51bd","Type":"GetCustomerProfile","Transitions":{"NextAction":"7218dcc7-63d8-4088-b659-910a8860d9bb","Errors":[{"NextAction":"e689eb14-57c4-4bef-9e33-946a01531ddf","ErrorType":"NoMatchingError"},{"NextAction":"e689eb14-57c4-4bef-9e33-946a01531ddf","ErrorType":"MultipleFoundError"},{"NextAction":"2155e568-201f-411e-9cfe-3ac9c8c7846f","ErrorType":"NoneFoundError"}]}},{"Parameters":{"Attributes":{"profileSearchValue":"$.Attributes.CUSTOM_CUSTOMER_EMAIL","profileSearchKey":"EmailAddress"},"TargetContact":"Current"},"Identifier":"2155e568-201f-411e-9cfe-3ac9c8c7846f","Type":"UpdateContactAttributes","Transitions":{"NextAction":"e689eb14-57c4-4bef-9e33-946a01531ddf","Errors":[{"NextAction":"e689eb14-57c4-4bef-9e33-946a01531ddf","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Thank you for your patience. A customer service team member will join you shortly."},"Identifier":"e689eb14-57c4-4bef-9e33-946a01531ddf","Type":"MessageParticipant","Transitions":{"NextAction":"3e4a3ffd-9da0-4cf7-9aff-68d5dfc38fdb","Errors":[{"NextAction":"3e4a3ffd-9da0-4cf7-9aff-68d5dfc38fdb","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Error"},"Identifier":"7e32d332-1644-45e7-8823-bc7517e7754c","Type":"MessageParticipant","Transitions":{"NextAction":"75ec1a9d-4c97-4891-99d1-b95d7c2dbe0b","Errors":[{"NextAction":"75ec1a9d-4c97-4891-99d1-b95d7c2dbe0b","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"You have reached us outside our business hours. \n\nOur services are available\nMonday-Friday from 8:00 am TO 12:00 am EST\n\nSaturday & Sunday from 9:00 am TO 10:00 pm EST\n\nFor urgent support please contact us at: https://support.discountmugs.com/"},"Identifier":"8b16e780-f1fa-4f98-968c-1f691add5695","Type":"MessageParticipant","Transitions":{"NextAction":"75ec1a9d-4c97-4891-99d1-b95d7c2dbe0b","Errors":[{"NextAction":"75ec1a9d-4c97-4891-99d1-b95d7c2dbe0b","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"You have reached us outside our business hours. \n\nOur services are available\nMonday-Friday from 8:00 am TO 10:00 pm EST\n\nSaturday & Sunday from 10:00 am TO 7:00 pm EST\n\nFor urgent support please contact us at: https://support.discountmugs.com/support/tickets/new"},"Identifier":"4d0c7b2c-a4d4-4f33-926e-dea54227a942","Type":"MessageParticipant","Transitions":{"NextAction":"75ec1a9d-4c97-4891-99d1-b95d7c2dbe0b","Errors":[{"NextAction":"75ec1a9d-4c97-4891-99d1-b95d7c2dbe0b","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"10608ddc-049d-49d2-b21a-92ba2275c948","Type":"TransferContactToQueue","Transitions":{"NextAction":"75ec1a9d-4c97-4891-99d1-b95d7c2dbe0b","Errors":[{"NextAction":"75ec1a9d-4c97-4891-99d1-b95d7c2dbe0b","ErrorType":"QueueAtCapacity"},{"NextAction":"75ec1a9d-4c97-4891-99d1-b95d7c2dbe0b","ErrorType":"NoMatchingError"}]}},{"Parameters":{"HoursOfOperationId":"${rHoursOfOperation}"},"Identifier":"af9bf216-081c-4129-a057-ec0f0ad3b2d6","Type":"CheckHoursOfOperation","Transitions":{"NextAction":"8b16e780-f1fa-4f98-968c-1f691add5695","Conditions":[{"NextAction":"1f1d9fc3-5755-4092-94da-0df13149d03d","Condition":{"Operator":"Equals","Operands":["True"]}},{"NextAction":"8b16e780-f1fa-4f98-968c-1f691add5695","Condition":{"Operator":"Equals","Operands":["False"]}}],"Errors":[{"NextAction":"8b16e780-f1fa-4f98-968c-1f691add5695","ErrorType":"NoMatchingError"}]}},{"Parameters":{"HoursOfOperationId":"${rHoursOfOperation}"},"Identifier":"a83fded9-68f3-473c-9445-b05282ccbaae","Type":"CheckHoursOfOperation","Transitions":{"NextAction":"4d0c7b2c-a4d4-4f33-926e-dea54227a942","Conditions":[{"NextAction":"1f1d9fc3-5755-4092-94da-0df13149d03d","Condition":{"Operator":"Equals","Operands":["True"]}},{"NextAction":"4d0c7b2c-a4d4-4f33-926e-dea54227a942","Condition":{"Operator":"Equals","Operands":["False"]}}],"Errors":[{"NextAction":"4d0c7b2c-a4d4-4f33-926e-dea54227a942","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.Lex.Slots.CustomerEmail"},"Identifier":"13f4d9a9-1b5e-4749-8853-1dbb26309d10","Type":"Compare","Transitions":{"NextAction":"d703ed41-dc20-42f5-82d5-c323a51248f4","Conditions":[{"NextAction":"8abd6162-24f8-4fb7-a092-069802654a9c","Condition":{"Operator":"TextContains","Operands":["@"]}}],"Errors":[{"NextAction":"d703ed41-dc20-42f5-82d5-c323a51248f4","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"ComparisonValue":"$.Lex.Slots.CustomerEmail"},"Identifier":"345f5eec-3d63-4309-af21-31e99e875621","Type":"Compare","Transitions":{"NextAction":"d823653e-3014-442a-a769-1128a23b51bd","Conditions":[{"NextAction":"6ffb73ca-3773-48d2-b6d3-75dc026fc837","Condition":{"Operator":"TextContains","Operands":["@"]}}],"Errors":[{"NextAction":"d823653e-3014-442a-a769-1128a23b51bd","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{},"Identifier":"75ec1a9d-4c97-4891-99d1-b95d7c2dbe0b","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"Text":"Welcome to $.Attributes.INSTANCE_DISPLAY_VALUE chat bot.","LexV2Bot":{"AliasArn":"arn:aws:lex:${AWS::Region}:${AWS::AccountId}:bot-alias/${rAWSLexBot}/${file(config/resources/references.yml):pLexbotAliasID}"},"LexSessionAttributes":{"session_customer_email":"$.Attributes.CUSTOM_CUSTOMER_EMAIL"}},"Identifier":"1f1d9fc3-5755-4092-94da-0df13149d03d","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"75ec1a9d-4c97-4891-99d1-b95d7c2dbe0b","Conditions":[{"NextAction":"345f5eec-3d63-4309-af21-31e99e875621","Condition":{"Operator":"Equals","Operands":["CustomerServiceIntent"]}},{"NextAction":"13f4d9a9-1b5e-4749-8853-1dbb26309d10","Condition":{"Operator":"Equals","Operands":["SalesIntent"]}}],"Errors":[{"NextAction":"13f4d9a9-1b5e-4749-8853-1dbb26309d10","ErrorType":"NoMatchingCondition"},{"NextAction":"75ec1a9d-4c97-4891-99d1-b95d7c2dbe0b","ErrorType":"NoMatchingError"}]}},{"Parameters":{"QueueId":"${rQueue}"},"Identifier":"31b81fa0-1cfb-4968-af29-c5d41e37274e","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"ceb3795c-9be8-4212-bf32-c80117479b68","Errors":[{"NextAction":"75ec1a9d-4c97-4891-99d1-b95d7c2dbe0b","ErrorType":"NoMatchingError"}]}},{"Parameters":{"QueueId":"${rQueue}"},"Identifier":"3e4a3ffd-9da0-4cf7-9aff-68d5dfc38fdb","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"ceb3795c-9be8-4212-bf32-c80117479b68","Errors":[{"NextAction":"75ec1a9d-4c97-4891-99d1-b95d7c2dbe0b","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Waiting for an available agent"},"Identifier":"148c95d7-c4f5-4a36-85f0-d279bc75320d","Type":"MessageParticipant","Transitions":{"NextAction":"10608ddc-049d-49d2-b21a-92ba2275c948","Errors":[{"NextAction":"75ec1a9d-4c97-4891-99d1-b95d7c2dbe0b","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda::${AWS::Region}:${AWS::AccountId}:function:${file(config/resources/references.yml):pLambdaFunction}","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"contactId":"$.ContactId"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"ceb3795c-9be8-4212-bf32-c80117479b68","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"148c95d7-c4f5-4a36-85f0-d279bc75320d","Errors":[{"NextAction":"148c95d7-c4f5-4a36-85f0-d279bc75320d","ErrorType":"NoMatchingError"}]}}]}
